<div class="plot-container">

    <div class="plot-box" *ngFor="let plot of plotData; let i = index; trackBy:identifierIndex">

        <div [id]="'m'+i" class="modal-container">
            <div class="modal">
                <svg (click)="toggleDialog($event,i)" class="close-icon" data-icon="times-circle" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm101.8-262.2L295.6 256l62.2 62.2c4.7 4.7 4.7 12.3 0 17l-22.6 22.6c-4.7 4.7-12.3 4.7-17 0L256 295.6l-62.2 62.2c-4.7 4.7-12.3 4.7-17 0l-22.6-22.6c-4.7-4.7-4.7-12.3 0-17l62.2-62.2-62.2-62.2c-4.7-4.7-4.7-12.3 0-17l22.6-22.6c4.7-4.7 12.3-4.7 17 0l62.2 62.2 62.2-62.2c4.7-4.7 12.3-4.7 17 0l22.6 22.6c4.7 4.7 4.7 12.3 0 17z"></path></svg>
                <div>
                    <!-- <h2>{{plot.label}}</h2> -->
                    <div [innerHTML]="plot.description"></div>
                </div>
            </div>
        </div>

        <div class="label">
            <div>{{plot.label}}</div>
            <svg (click)="toggleDialog($event,i)" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"></path></svg>
        </div>

        <div class="stats-box">
            <div *ngFor="let line of config.plot.plots[i].lines" class='stat ripple' (click)="hideLine(line)" [ngStyle]="{'border-color': line.color[0]}">
            <div>{{line.label | titlecase}}</div>
                <div>{{sources?.model?.channels[line.y].value.slice(-1)[0] | numberKMBT: 1}}</div>
            </div>
        </div>

        <div class="containChart dark">
            <ngx-charts-line-chart [xScaleMin]="xMin" [xScaleMax]="xMax" [yScaleMin]="plot.ylim[0]" [yScaleMax]="plot.ylim[1]" [animations]="animations" [view]="" [scheme]="plot.colors" [legend]="legend" [showXAxisLabel]="showXAxisLabel" [showYAxisLabel]="showYAxisLabel"
                [xAxis]="xAxis" [yAxis]="yAxis" [xAxisLabel]="xAxisLabel " [yAxisLabel]="yAxisLabel " [timeline]="timeline " [tooltipDisabled]="tooltipDisabled " [results]="plot.lines " [yAxisTickFormatting]="plot.formatData ">
                <ng-template #tooltipTemplate let-model="model">
                    <span class="tooltip-label">{{model.name | date}}</span>
                    <span class="tooltip-val">{{plot.formatData(model.value)}}</span>
                </ng-template>

                <ng-template #seriesTooltipTemplate let-model="model">
                    <xhtml:div class="area-tooltip-container">

                        <xhtml:div class="tooltip-item">
                            <xhtml:span class="tooltip-item-color" [style.background-color]="'#000000'"></xhtml:span>
                            <ng-container class="tooltip-label">{{model[0].name | date}}</ng-container>
                        </xhtml:div>

                        <xhtml:div *ngFor="let tooltipItem of model; let i = index;" class="tooltip-item">
                            <xhtml:span class="tooltip-item-color" [style.background-color]="tooltipItem.color"></xhtml:span>
                            {{ getSeriesToolTipText(tooltipItem,plot.formatData) }}
                        </xhtml:div>

                    </xhtml:div>
                </ng-template>

            </ngx-charts-line-chart>
        </div>

    </div>
</div>